<?php
declare(strict_types=1);
?>
<?php use Tracy\BlueScreen ?><?php use Tracy\Debugger ?><?php use Tracy\Helpers ?><?php $sourceOriginal = $file && @is_file($file) ? [$file, $line] : null ?><?php $sourceMapped = $sourceOriginal ? Debugger::mapSource($file, $line) : null ?>
<section class="tracy-section">
	<h2 class="tracy-section-label">
		<a href="#" data-tracy-ref="^+" class="tracy-toggle<?= Tracy\Helpers::escapeHtml(($collapsed = $expanded !== null) ? ' tracy-collapsed' : '') ?>
">
			Source file
		</a>
	</h2>

	<div class="tracy-section-panel<?= Tracy\Helpers::escapeHtml($collapsed ? ' tracy-collapsed' : '') ?>
">
<?php if ($sourceOriginal && $sourceMapped): ?>			<div class="tracy-tabs">
				<ul class="tracy-tab-bar">
					<li class="tracy-tab-label<?= Tracy\Helpers::escapeHtml($sourceMapped['active'] ? '' : ' tracy-active') ?>
"><a href="#">PHP</a></li>
					<li class="tracy-tab-label<?= Tracy\Helpers::escapeHtml($sourceMapped['active'] ? ' tracy-active' : '') ?>
"><a href="#"><?= Tracy\Helpers::escapeHtml($sourceMapped['label']) ?>
</a></li>
				</ul>

				<div>
					<div class="tracy-tab-panel<?= Tracy\Helpers::escapeHtml($sourceMapped['active'] ? '' : ' tracy-active') ?>
">
						<p><b>File:</b> <?= Helpers::editorLink(...$sourceOriginal) ?>
</p>
						<?= BlueScreen::highlightFile(...$sourceOriginal) ?>

					</div>

					<div class="tracy-tab-panel<?= Tracy\Helpers::escapeHtml($sourceMapped['active'] ? ' tracy-active' : '') ?>
">
						<p><b>File:</b> <?= Helpers::editorLink($sourceMapped['file'], $sourceMapped['line']) ?>
</p>
						<?= BlueScreen::highlightFile($sourceMapped['file'], $sourceMapped['line'], php: false) ?>

					</div>
				</div>
			</div>
<?php else: ?>			<p><b>File:</b> <?= Helpers::editorLink($file, $line) ?>
</p>
<?php if ($sourceOriginal): ?>
			<?= BlueScreen::highlightFile(...$sourceOriginal) ?>

<?php endif ?>
<?php endif ?>	</div>
</section>
